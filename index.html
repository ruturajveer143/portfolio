<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1.0" name="viewport" />
  <title></title>
  <meta name="description" />
  <meta name="keywords" />
  <meta name="robots" content="index, follow" />
  <link href="assets/img/icons8-r-50.png" rel="icon" />
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Raleway|Poppins" rel="stylesheet" />
  <link href="assets/vendor/aos/aos.css" rel="stylesheet" />
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet" />
  <link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet" />
  <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet" />
  <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet" />
  <link href="assets/css/style.css" rel="stylesheet" />
</head>

<body>
  <main class="container mt-5" id="portfolioContent">
    <h1>Loading portfolio...</h1>
  </main>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-database-compat.js"></script>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyDVXI5VvxM3bhRV9ChMBANtH0EtjGkBZMI",
      authDomain: "ruturaj-veer.firebaseapp.com",
      databaseURL: "https://ruturaj-veer-default-rtdb.firebaseio.com",
      projectId: "ruturaj-veer",
      storageBucket: "ruturaj-veer.appspot.com",
      messagingSenderId: "168086635691",
      appId: "1:168086635691:web:eedec947d385a3b53ae3ee",
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    db.ref("siteData").once("value").then((snapshot) => {
      const data = snapshot.val();

      // Meta
      document.title = data.meta?.title || "";
      document.querySelector('meta[name="description"]').setAttribute("content", data.meta?.description || "");
      document.querySelector('meta[name="keywords"]').setAttribute("content", data.meta?.keywords || "");

      // Profile + Hero Section
      const profile = data.profile;
      const social = data.links?.social || {};
      const heroHTML = `
        <section id="hero" class="text-center p-4 bg-light rounded shadow mb-5">
          <img src="assets/img/Snapchat-1639444201-fotor-2023090212464.png" class="rounded-circle mb-3" width="150" />
          <h1>${profile.name}</h1>
          <p><strong>${profile.title}</strong></p>
          <div class="social-links">
            <a href="${social.twitter}" target="_blank"><i class="bx bxl-twitter"></i></a>
            <a href="${social.facebook}" target="_blank"><i class="bx bxl-facebook"></i></a>
            <a href="${social.instagram}" target="_blank"><i class="bx bxl-instagram"></i></a>
            <a href="${social.github}" target="_blank"><i class="bx bxl-github"></i></a>
            <a href="${social.linkedin}" target="_blank"><i class="bx bxl-linkedin"></i></a>
          </div>
        </section>
      `;

      // About Section
      const dob = parseInt(profile.dob.split("-")[0]);
      const age = new Date().getFullYear() - dob;
      const aboutHTML = `
        <section class="mb-5">
          <h2>About Me</h2>
          <p><strong>Location:</strong> ${profile.location}</p>
          <p><strong>Date of Birth:</strong> ${profile.dob}</p>
          <p><strong>Age:</strong> ${age}</p>
          <p><strong>Nationality:</strong> ${profile.nationality}</p>
          <p><strong>Bio:</strong> ${profile.bio}</p>
        </section>
      `;

      // Skills
      const skillsHTML = `
        <section class="mb-5">
          <h2>Skills</h2>
          <div class="row">
            ${data.skills.map(skill => `
              <div class="col-md-6">
                <p>${skill.name}</p>
                <div class="progress mb-3">
                  <div class="progress-bar" role="progressbar" style="width: ${skill.level}%" aria-valuenow="${skill.level}" aria-valuemin="0" aria-valuemax="100">${skill.level}%</div>
                </div>
              </div>
            `).join('')}
          </div>
        </section>
      `;

      // Education
      const educationHTML = `
        <section class="mb-5">
          <h2>Education</h2>
          ${data.education.map(edu => `
            <div>
              <h5>${edu.degree}</h5>
              <p><strong>${edu.institute}</strong></p>
              <p>${edu.duration}</p>
              <p>Marks: ${edu.marks}</p>
              <hr />
            </div>
          `).join('')}
        </section>
      `;

      // Experience
      const exp = data.experience;
      const experienceHTML = `
        <section class="mb-5">
          <h2>Experience</h2>
          <h5>${exp.position}</h5>
          <p><strong>${exp.location}</strong></p>
          <p>${exp.duration}</p>
        </section>
      `;

      // Certificates
      const certHTML = `
        <section class="mb-5">
          <h2>Certificates</h2>
          <div class="row">
            ${data.certificates.map(cert => `
              <div class="col-md-4 mb-3">
                <div class="card">
                  <img src="${cert.img}" class="card-img-top" alt="${cert.title}">
                  <div class="card-body">
                    <h6 class="card-title">${cert.title}</h6>
                  </div>
                </div>
              </div>
            `).join('')}
          </div>
        </section>
      `;

      // Projects
      const projectHTML = `
        <section class="mb-5">
          <h2>Projects</h2>
          ${data.projects.map(project => `
            <div class="mb-4">
              <h5>${project.title}</h5>
              <p>${project.description.join("<br>")}</p>
              <hr />
            </div>
          `).join('')}
        </section>
      `;

      // Inject all into page
      document.getElementById("portfolioContent").innerHTML = `
        ${heroHTML}
        ${aboutHTML}
        ${skillsHTML}
        ${educationHTML}
        ${experienceHTML}
        ${certHTML}
        ${projectHTML}
      `;
    });
  </script>

  <!-- Vendor JS Files -->
  <script src="assets/vendor/purecounter/purecounter.js"></script>
  <script src="assets/vendor/aos/aos.js"></script>
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/glightbox/js/glightbox.min.js"></script>
  <script src="assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
  <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>
  <script src="assets/vendor/typed.js/typed.min.js"></script>
  <script src="assets/vendor/waypoints/noframework.waypoints.js"></script>
  <script src="assets/vendor/php-email-form/validate.js"></script>
  <script src="assets/js/main.js"></script>
</body>

</html>
